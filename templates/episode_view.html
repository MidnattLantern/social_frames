{% extends "base.html" %} {% block content %}
{% load crispy_forms_tags %}
<div class="header_window">
    <h1>Scenes for {{ scene_4_header }}</h1>
<!-- see models.py SceneItem() -->
{% if user.is_authenticated %}
<!-- this <p> mimics Finder so that the user purpose feels familiar -->
<p><a href="{% url 'account_logout' %}">{{ user.username }}</a> / <a href="{% url 'home_url_path' %}">Projects</a> / <a href="{% url 'home_url_path' %}">Episodes</a> / <strong>Scenes</strong></p>
</div>

<div class="body_window">
  {% for i in scene_item %}
  <div class="row" style="margin: 0px;">
  <!-- Object (3/4) -->
    <div class="object_window col-md-8">
      <p>Scene: {{ i.scene_chronology }}</p>
      <h2>
        <a href="{% url 'scene_url_path' i.scene_slug %}">
          <!-- scene name -->
          {{ i.scene_name }}
        </a>
      </h2>
      <p>Scene notes: <br> {{ i.scene_event_notes }} </p>
    </div>
  <!-- End for object -->
  <!-- Edit and delete (1/4) -->
  <div class="edit_window col-md-4">

    <p>Edit {{ i.scene_name }}</p>
      <form method="post" class="white_font">
        {{ edit_scene_item | crispy }}
        {% csrf_token %}
        <button type="submit" name="edit_scene" value="{{ i.scene_slug }}">Save changes</button>
      </form>

    <br>

    <form action="" method="POST" onsubmit="return confirmDelete()">
      {% csrf_token %} {{ delete_scene_item | crispy }}
      <button type="submit" name="delete_scene" value="{{ i.scene_slug }}">Delete scene</button>
    </form>
    <script>
      function confirmDelete() {
          return confirm("Deleting this scene will also delete everything inside it, this cannot be undone!");
      }
    </script>

  </div>
  </div>
  <!-- edit form -->
  <!--
<div class="object_window">
  <div class="new_item_styling">
    <div>
      <p>Edit {{ i.scene_name }}</p>
      <form method="post" class="white_font">
        {{ edit_scene_item | crispy }}
        {% csrf_token %}
        <button type="submit" name="edit_scene" value="{{ i.scene_slug }}">Save changes</button>
      </form>
    </div>
  </div>
  -->
  <!-- Delete form -->
  <!--
  <div>
    <form action="" method="POST">
      {% csrf_token %} {{ delete_scene_item | crispy }}
      <button type="submit" name="delete_scene" value="{{ i.scene_slug }}">Delete scene</button>
    </form>
  </div>
-->
<!-- </div> -->
  <!-- End for edit and delete -->
<br>
{% endfor %}

    <div class="new_item_styling">
    <p>Create new scene</p>
    <form method="post" style="margin-top: 1.3em;" class="white_font">
        {{ create_scene_item | crispy}}
        {% csrf_token %}
        <button type="submit" class="" name="add_scene">Create scene</button>
      </form>
    </div>
    {% endif %}
</div>

{% endblock %}